# 프로젝트 개요

## 프로젝트명
IACSRAG - 문서 검색 플랫폼 (RAG - Retrieval Augmented Generation)

## 프로젝트 목표
이벤트 기반 아키텍처를 활용한 확장 가능한 문서 검색 및 질의응답 시스템 구축

## 핵심 기능
- **문서 수집 (Ingest)**: 파일 업로드, 이메일 파싱, 문서 메타데이터 관리
- **문서 처리 (Process)**: 텍스트 추출, 청킹, 임베딩 생성, 중복 제거
- **검색 (Search)**: 벡터 기반 의미 검색, LLM 답변 생성
- **모니터링 (Monitor)**: 시스템 메트릭 수집, 알림 관리, 헬스체크

## 지원 문서 형식
- **PDF**: 텍스트 추출 및 메타데이터 파싱
- **DOCX**: Microsoft Word 문서 처리
- **이메일**: 첨부파일 포함 이메일 파싱
- **향후 확장**: TXT, HTML, PPT 등

## 기술 스택

### 핵심 기술
- **Backend**: FastAPI (Python 3.12)
- **Database**: MongoDB (문서/메타데이터 저장)
- **Vector DB**: Qdrant (벡터 임베딩 저장/검색)
- **Message Queue**: Apache Kafka (이벤트 스트리밍)
- **LLM**: OpenAI API (임베딩 생성, 답변 생성)

### 개발 도구
- **Package Manager**: Poetry
- **Container**: Docker, Docker Compose
- **Testing**: pytest, pytest-asyncio
- **Code Quality**: black, isort, mypy
- **Logging**: structlog (구조화된 로깅)

## 아키텍처 특징

### 설계 원칙
- **이벤트 기반 아키텍처**: 모듈 간 느슨한 결합
- **Port/Adapter 패턴**: 외부 시스템 연동 추상화
- **유즈케이스 패턴**: 복잡한 비즈니스 로직 캡슐화
- **의존성 주입**: 테스트 가능하고 유연한 구조

### 모듈 구성
1. **Core**: 공통 설정, 예외, 로깅, 의존성 주입
2. **Infrastructure**: 데이터베이스, 메시징, 외부 API 연동
3. **Modules**: 비즈니스 도메인별 모듈 (Ingest, Process, Search, Monitor)
4. **API**: REST API 엔드포인트
5. **Utils**: 공통 유틸리티 함수

## 개발 현황 (2025-05-31)

### 완료된 단계
- ✅ **Phase 0**: 개발 환경 구축
- ✅ **Phase 1**: 핵심 인프라 및 공통 모듈
- ✅ **Phase 2**: 모든 비즈니스 모듈 구현 완료
  - ✅ Ingest Module (문서 수집)
  - ✅ Process Module (문서 처리)
  - ✅ Search Module (검색)
  - ✅ Monitor Module (모니터링)

### 진행 중인 단계
- 🔄 **Phase 3**: 통합 및 최적화
  - ✅ 모듈 통합 완료
  - 🔄 성능 최적화 (캐싱, 병렬 처리)
  - 🔄 에러 처리 강화

### 향후 계획
- 📋 **Phase 4**: 테스트 및 문서화
  - 통합 테스트 확장
  - E2E 테스트 구현
  - API 문서 완성

## 주요 성과

### 기술적 성과
- **모듈화된 아키텍처**: 각 모듈이 독립적으로 개발/테스트 가능
- **이벤트 기반 통신**: Kafka를 통한 비동기 모듈 간 통신
- **테스트 커버리지**: 각 모듈별 단위 테스트 완료
- **의존성 추상화**: Port/Adapter 패턴으로 외부 의존성 분리

### 비즈니스 가치
- **확장 가능한 구조**: 새로운 문서 형식 쉽게 추가 가능
- **실시간 처리**: 이벤트 기반으로 문서 처리 파이프라인 구현
- **모니터링 내장**: 시스템 상태 실시간 모니터링 및 알림
- **API 우선**: RESTful API로 다양한 클라이언트 지원

## 이벤트 흐름

### 문서 처리 파이프라인
```
파일 업로드 → DocumentUploaded 이벤트 → 텍스트 추출 → 
TextExtracted 이벤트 → 청킹 → ChunksCreated 이벤트 → 
임베딩 생성 → EmbeddingsGenerated 이벤트 → 벡터 DB 저장
```

### 검색 프로세스
```
검색 쿼리 → 쿼리 임베딩 → 벡터 검색 → 
관련 문서 조회 → LLM 답변 생성 → 결과 반환
```

## 품질 보증

### 테스트 전략
- **단위 테스트**: 각 모듈의 핵심 로직 검증
- **통합 테스트**: 모듈 간 상호작용 검증
- **E2E 테스트**: 전체 시나리오 검증

### 코드 품질
- **정적 분석**: mypy를 통한 타입 검사
- **코드 포맷팅**: black, isort 자동 적용
- **테스트 커버리지**: 80% 이상 목표

## 운영 고려사항

### 모니터링
- **시스템 메트릭**: CPU, 메모리, 디스크 사용량
- **비즈니스 메트릭**: 문서 처리량, 검색 성능
- **알림 시스템**: 임계치 초과 시 이메일 알림

### 확장성
- **수평 확장**: 모듈별 독립 스케일링 가능
- **캐싱 전략**: Redis 도입 예정
- **배치 처리**: 대용량 문서 처리 최적화

### 보안
- **입력 검증**: Pydantic 스키마 검증
- **에러 처리**: 민감 정보 노출 방지
- **로깅**: 구조화된 로그로 감사 추적

## 향후 로드맵

### 단기 목표 (1-2개월)
- 성능 최적화 완료
- 통합 테스트 구축
- 운영 환경 배포 준비

### 중기 목표 (3-6개월)
- 추가 문서 형식 지원
- 고급 검색 기능 (필터링, 정렬)
- 사용자 인증/권한 관리

### 장기 목표 (6개월 이상)
- 마이크로서비스 분리
- 클라우드 네이티브 배포
- AI 기능 고도화

## 성공 지표

### 기술적 지표
- **응답 시간**: 검색 응답 < 2초
- **처리량**: 시간당 1000개 문서 처리
- **가용성**: 99.9% 업타임

### 비즈니스 지표
- **사용자 만족도**: 검색 결과 정확도
- **시스템 안정성**: 장애 발생 빈도
- **확장성**: 새로운 요구사항 대응 속도
